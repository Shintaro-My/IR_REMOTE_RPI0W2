(function(){"use strict";var e={9131:function(e,t,a){var n=a(9242),l=a(3396),i=a(7139),o=a(4870),s=a(2483);const u={class:"luminance"},r={class:"value"},c={class:"wrapper"},v={class:"util"};var d={__name:"App",setup(e){const t=(0,o.iH)(0),a=(0,o.iH)(!0),n=(async()=>{while(a.value){let a=NaN;try{const e=await fetch("/api/cds"),{value:t}=await e.json();a=t||NaN}catch(e){console.log(e)}t.value=a,await new Promise((e=>setTimeout(e,1e3)))}return!0})();return console.log(n),(e,a)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("header",null,[(0,l._)("div",u,[(0,l._)("div",r,(0,i.zw)(t.value),1)]),(0,l._)("div",c,[(0,l._)("div",v,[(0,l._)("button",{class:"btn btn-radius-solid",onClick:a[0]||(a[0]=(...e)=>console.log&&console.log(...e))},"ドアを開錠する")]),(0,l._)("nav",null,[(0,l.Wm)((0,o.SU)(s.rH),{to:"/irtable"},{default:(0,l.w5)((()=>[(0,l.Uk)("信号一覧")])),_:1})])])]),(0,l.Wm)((0,o.SU)(s.MA))],64))}},p=a(89);const f=(0,p.Z)(d,[["__scopeId","data-v-29269ad1"]]);var k=f;const w=e=>((0,l.dD)("data-v-132f7332"),e=e(),(0,l.Cn)(),e),y={class:"wrap"},_=w((()=>(0,l._)("h1",null,"信号一覧",-1))),m={class:"table-custom-util"},h=["onClick"],b={class:"operation-wrapper"},g=["onClick"],C=["onClick"],x={class:"memo"},D={class:"bold"},O={class:"signal"},j={key:1,class:"darkbox"},H={class:"inline"},U={class:"btns"},T={key:2,class:"darkbox"},z={class:"btns"};var E={__name:"IRTableView",setup(e){const t=[{text:"key",value:"key",sortable:!0},{text:"desc",value:"desc",sortable:!0},{text:"_",value:"operation"}],a=(0,o.iH)([]),s=(0,o.iH)([]),u=(0,o.iH)(!1),r=(0,o.iH)("key"),c=(0,o.iH)(""),v=(0,o.iH)(!1),d=(0,o.iH)(!1),p=async()=>{u.value=!0;const e=await fetch("/api/ir");if(200!=e.status)return!1;const t=await e.json();return s.value=Object.keys(t).map((e=>({key:e,...t[e]}))),u.value=!1,!0},f=()=>{v.value=!1},k=()=>{d.value=!1},w=async e=>{u.value=!0;const t=await fetch(`/api/ir/${e}`);if(200!=t.status)return alert("Communication failed."),!1;u.value=!1},E=(0,o.qj)({key:"",value:[],desc:""}),q=e=>{const{key:t,value:a,desc:n}=e;E.key=t,E.value=a,E.desc=n,v.value=!0},N=async()=>{const{key:e,desc:t}=E;if(!e)return alert("アイテム名は空欄にできません");u.value=!0;const a=await fetch(`/api/ir/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({desc:t})});if(200!=a.status)return alert("Communication failed."),!1;f(),await p()},P=(0,o.qj)({key:""}),S=e=>{P.key=e.key,d.value=!0},I=async(e=null,t=!1)=>{u.value=!0;let{key:a}=P;e&&(a=e);const n=await fetch(`/api/ir/${a}`,{method:"DELETE"});if(200!=n.status)return alert("Communication failed."),!1;t||(k(),await p())},V=async()=>{confirm("本当に削除しますか？")&&(u.value=!0,await Promise.all(a.value.map((e=>I(e.key,!0)))),k(),await p())};return p(),(e,o)=>{const W=(0,l.up)("EasyDataTable");return(0,l.wg)(),(0,l.iD)("div",y,[_,(0,l._)("div",m,[(0,l._)("a",{onClick:o[0]||(o[0]=e=>p())},"最新の情報に更新する"),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e)},null,512),[[n.nr,c.value]])]),(0,l.Wm)(W,{"show-index":"","items-selected":a.value,"onUpdate:itemsSelected":o[2]||(o[2]=e=>a.value=e),"buttons-pagination":"",headers:t,items:s.value,loading:u.value,"rows-per-page":10,"search-field":r.value,"search-value":c.value,alternating:""},{"item-key":(0,l.w5)((({key:e})=>[(0,l._)("a",{onClick:t=>w(e)},(0,i.zw)(e),9,h)])),"item-operation":(0,l.w5)((e=>[(0,l._)("div",b,[(0,l._)("div",null,[(0,l._)("a",{onClick:t=>q(e)},"編集",8,g)]),(0,l._)("div",null,[(0,l._)("a",{onClick:t=>S(e)},"削除",8,C)])])])),expand:(0,l.w5)((e=>[(0,l._)("div",x,[(0,l._)("div",null,[(0,l._)("span",D,"value ("+(0,i.zw)(e.value.length)+"): ",1),(0,l._)("div",O,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.value,((e,t)=>((0,l.wg)(),(0,l.iD)("span",{class:"signal_item",key:t},(0,i.zw)(e),1)))),128))])])])])),_:1},8,["items-selected","items","loading","search-field","search-value"]),a.value.length?((0,l.wg)(),(0,l.iD)("a",{key:0,onClick:o[3]||(o[3]=e=>V())},(0,i.zw)(a.value.length)+" 件のアイテムを削除",1)):(0,l.kq)("",!0),v.value?((0,l.wg)(),(0,l.iD)("div",j,[(0,l._)("h3",null,[(0,l.Uk)('Editing "'),(0,l._)("pre",H,(0,i.zw)(E.key),1),(0,l.Uk)('":')]),(0,l._)("div",null,[(0,l._)("div",null,[(0,l.Uk)("desc:"),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=e=>E.desc=e)},null,512),[[n.nr,E.desc]])])]),(0,l._)("div",U,[(0,l._)("button",{onClick:o[5]||(o[5]=e=>N())},"Save"),(0,l._)("button",{onClick:o[6]||(o[6]=e=>f())},"Cancel")])])):(0,l.kq)("",!0),d.value?((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("h3",null,'Delete "'+(0,i.zw)(P.key)+'"?',1),(0,l._)("div",z,[(0,l._)("button",{onClick:o[7]||(o[7]=e=>I())},"Delete"),(0,l._)("button",{onClick:o[8]||(o[8]=e=>k())},"Cancel")])])):(0,l.kq)("",!0)])}}};const q=(0,p.Z)(E,[["__scopeId","data-v-132f7332"]]);var N=q;const P=(0,s.p7)({history:(0,s.r5)(),routes:[{path:"/irtable",name:"irtable",component:N}]});var S=P,I=a(5893);const V=(0,n.ri)(k);V.component("EasyDataTable",I.Z),V.use(S),V.mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,i){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],i=e[c][2];for(var s=!0,u=0;u<n.length;u++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[u])}))?n.splice(u--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var r=l();void 0!==r&&(t=r)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,l,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,i,o=n[0],s=n[1],u=n[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(l in s)a.o(s,l)&&(a.m[l]=s[l]);if(u)var c=u(a)}for(t&&t(n);r<o.length;r++)i=o[r],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},n=self["webpackChunkclient"]=self["webpackChunkclient"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9131)}));n=a.O(n)})();
//# sourceMappingURL=app.0cd3e732.js.map