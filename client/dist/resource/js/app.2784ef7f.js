(function(){"use strict";var e={6527:function(e,t,n){var a=n(9242),i=n(3396),l=n(7139),o=n(4870),s=n(2483);const u={class:"luminance"},c=["data-millis"],r={class:"wrapper"},v={class:"util"};var d={__name:"App",setup(e){const t=(0,o.iH)(0),n=(0,o.iH)(0),a=(0,o.iH)(!0),d=(async()=>{while(a.value){let a=NaN;try{const e=await fetch("/api/cds"),{value:t,millis:i}=await e.json();a=t||NaN,n.value=i}catch(e){console.log(e)}t.value=a,await new Promise((e=>setTimeout(e,1e3)))}return!0})();return console.log(d),(e,a)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("header",null,[(0,i._)("div",u,[(0,i._)("div",{class:"value","data-millis":n.value},(0,l.zw)(t.value),9,c)]),(0,i._)("div",r,[(0,i._)("div",v,[(0,i._)("button",{class:"btn btn-radius-solid",onClick:a[0]||(a[0]=(...e)=>console.log&&console.log(...e))},"ドアを開錠する")]),(0,i._)("nav",null,[(0,i.Wm)((0,o.SU)(s.rH),{to:"/irtable"},{default:(0,i.w5)((()=>[(0,i.Uk)("信号一覧")])),_:1})])])]),(0,i.Wm)((0,o.SU)(s.MA))],64))}},f=n(89);const p=(0,f.Z)(d,[["__scopeId","data-v-308b2c00"]]);var k=p;const w=e=>((0,i.dD)("data-v-4cf3c7e6"),e=e(),(0,i.Cn)(),e),_={class:"wrap"},y=w((()=>(0,i._)("h1",null,"信号一覧",-1))),m=["onClick"],b={class:"operation-wrapper"},h=["onClick"],g=["onClick"],C={class:"memo"},x={class:"bold"},D={class:"signal"},O={key:1,class:"darkbox"},j={class:"inline"},H={class:"btns"},T={key:2,class:"darkbox"},U={class:"btns"};var z={__name:"IRTableView",setup(e){const t=[{text:"key",value:"key",sortable:!0},{text:"desc",value:"desc",sortable:!0},{text:"_",value:"operation"}],n=(0,o.iH)([]),s=(0,o.iH)([]),u=(0,o.iH)(!1),c=(0,o.iH)(!1),r=(0,o.iH)(!1),v=async()=>{u.value=!0;const e=await fetch("/api/ir");if(200!=e.status)return!1;const t=await e.json();return s.value=Object.keys(t).map((e=>({key:e,...t[e]}))),u.value=!1,!0},d=()=>{c.value=!1},f=()=>{r.value=!1},p=async e=>{u.value=!0;const t=await fetch(`/api/ir/${e}`);if(200!=t.status)return alert("Communication failed."),!1;u.value=!1},k=(0,o.qj)({key:"",value:[],desc:""}),w=e=>{const{key:t,value:n,desc:a}=e;k.key=t,k.value=n,k.desc=a,c.value=!0},z=async()=>{const{key:e,desc:t}=k;if(!e)return alert("アイテム名は空欄にできません");u.value=!0;const n=await fetch(`/api/ir/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({desc:t})});if(200!=n.status)return alert("Communication failed."),!1;d(),await v()},E=(0,o.qj)({key:""}),q=e=>{E.key=e.key,r.value=!0},N=async(e=null,t=!1)=>{u.value=!0;let{key:n}=E;e&&(n=e);const a=await fetch(`/api/ir/${n}`,{method:"DELETE"});if(200!=a.status)return alert("Communication failed."),!1;t||(f(),await v())},P=async()=>{confirm("本当に削除しますか？")&&(u.value=!0,await Promise.all(n.value.map((e=>N(e.key,!0)))),f(),await v())};return v(),(e,o)=>{const S=(0,i.up)("EasyDataTable");return(0,i.wg)(),(0,i.iD)("div",_,[y,(0,i._)("a",{onClick:o[0]||(o[0]=e=>v())},"最新の情報に更新する"),(0,i.Wm)(S,{"show-index":"","items-selected":n.value,"onUpdate:itemsSelected":o[1]||(o[1]=e=>n.value=e),"buttons-pagination":"",headers:t,items:s.value,loading:u.value,alternating:""},{"item-key":(0,i.w5)((({key:e})=>[(0,i._)("a",{onClick:t=>p(e)},(0,l.zw)(e),9,m)])),"item-operation":(0,i.w5)((e=>[(0,i._)("div",b,[(0,i._)("div",null,[(0,i._)("a",{onClick:t=>w(e)},"編集",8,h)]),(0,i._)("div",null,[(0,i._)("a",{onClick:t=>q(e)},"削除",8,g)])])])),expand:(0,i.w5)((e=>[(0,i._)("div",C,[(0,i._)("div",null,[(0,i._)("span",x,"value ("+(0,l.zw)(e.value.length)+"): ",1),(0,i._)("div",D,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.value,((e,t)=>((0,i.wg)(),(0,i.iD)("span",{class:"signal_item",key:t},(0,l.zw)(e),1)))),128))])])])])),_:1},8,["items-selected","items","loading"]),n.value.length?((0,i.wg)(),(0,i.iD)("a",{key:0,onClick:o[2]||(o[2]=e=>P())},(0,l.zw)(n.value.length)+" 件のアイテムを削除",1)):(0,i.kq)("",!0),c.value?((0,i.wg)(),(0,i.iD)("div",O,[(0,i._)("h3",null,[(0,i.Uk)('Editing "'),(0,i._)("pre",j,(0,l.zw)(k.key),1),(0,i.Uk)('":')]),(0,i._)("div",null,[(0,i._)("div",null,[(0,i.Uk)("desc:"),(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=e=>k.desc=e)},null,512),[[a.nr,k.desc]])])]),(0,i._)("div",H,[(0,i._)("button",{onClick:o[4]||(o[4]=e=>z())},"Save"),(0,i._)("button",{onClick:o[5]||(o[5]=e=>d())},"Cancel")])])):(0,i.kq)("",!0),r.value?((0,i.wg)(),(0,i.iD)("div",T,[(0,i._)("h3",null,'Delete "'+(0,l.zw)(E.key)+'"?',1),(0,i._)("div",U,[(0,i._)("button",{onClick:o[6]||(o[6]=e=>N())},"Delete"),(0,i._)("button",{onClick:o[7]||(o[7]=e=>f())},"Cancel")])])):(0,i.kq)("",!0)])}}};const E=(0,f.Z)(z,[["__scopeId","data-v-4cf3c7e6"]]);var q=E;const N=(0,s.p7)({history:(0,s.r5)(),routes:[{path:"/irtable",name:"irtable",component:q}]});var P=N,S=n(5893);const I=(0,a.ri)(k);I.component("EasyDataTable",S.Z),I.use(P),I.mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,l){if(!a){var o=1/0;for(r=0;r<e.length;r++){a=e[r][0],i=e[r][1],l=e[r][2];for(var s=!0,u=0;u<a.length;u++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(s=!1,l<o&&(o=l));if(s){e.splice(r--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[a,i,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,l,o=a[0],s=a[1],u=a[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)var r=u(n)}for(t&&t(a);c<o.length;c++)l=o[c],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(r)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(6527)}));a=n.O(a)})();
//# sourceMappingURL=app.2784ef7f.js.map