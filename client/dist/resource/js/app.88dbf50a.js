(function(){"use strict";var e={5090:function(e,t,n){var a=n(9242),l=n(3396),i=n(7139),o=n(4870),s=n(2483);const u={class:"luminance"},r={class:"value"},c={class:"wrapper"};var d={__name:"App",setup(e){const t=(0,o.iH)(0),n=(0,o.iH)(!0),a=(async()=>{while(n.value){let n=NaN;try{const e=await fetch("/api/cds"),{value:t}=await e.json();n=t||NaN}catch(e){console.log(e)}t.value=n,await new Promise((e=>setTimeout(e,1e3)))}return!0})();return console.log(a),(e,n)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("header",null,[(0,l._)("div",u,[(0,l._)("div",r,(0,i.zw)(t.value),1)]),(0,l._)("div",c,[(0,l._)("nav",null,[(0,l.Wm)((0,o.SU)(s.rH),{to:"/irtable"},{default:(0,l.w5)((()=>[(0,l.Uk)("信号一覧")])),_:1})])])]),(0,l.Wm)((0,o.SU)(s.MA))],64))}},v=n(89);const p=(0,v.Z)(d,[["__scopeId","data-v-87e0a700"]]);var f=p,k=n(7091);const y=e=>((0,l.dD)("data-v-7d705c9c"),e=e(),(0,l.Cn)(),e),_={class:"wrap"},w=y((()=>(0,l._)("h1",null,"信号一覧",-1))),m={class:"table-custom-util"},h=["onClick"],b={class:"operation-wrapper"},g=["onClick"],C=["onClick"],j={class:"memo"},O={class:"bold"},U={class:"signal"},x={key:1,class:"darkbox"},D={class:"inline"},H={class:"btns"},T={key:2,class:"darkbox"},S={class:"inline"},z={class:"btns"},E={key:3,class:"darkbox"},q={class:"btns"};var V={__name:"IRTableView",setup(e){const t=[{text:"key",value:"key",sortable:!0},{text:"desc",value:"desc",sortable:!0},{text:"_",value:"operation"}],n=(0,o.iH)([]),s=(0,o.iH)([]);let u={};const r=(0,o.iH)(!1),c=(0,o.iH)("key"),d=(0,o.iH)(""),v=(0,o.iH)(!1),p=(0,o.iH)(!1),f=(0,o.iH)(!1),y=async()=>{r.value=!0;const e=await fetch("/api/ir");if(200!=e.status)return!1;const t=await e.json();s.value=Object.keys(t).map((e=>({key:e,...t[e]}))),r.value=!1,u={};for(const n of Object.keys(t)){let e=u;for(const t of n.split(":"))e[t]=e[t]||{},e=e[t]}return!0},V=e=>{let t=u;for(const n of e)if(!(t=t?.[n]))return[];return Object.keys(t)},N=()=>{v.value=!1},P=()=>{p.value=!1},W=()=>{f.value=!1},Z=async e=>{r.value=!0;const t=await fetch(`/api/ir/${e}`);if(200!=t.status)return alert("Communication failed."),!1;r.value=!1},A=(0,o.qj)({_key:[],desc:""}),I=async()=>{const{_key:e,desc:t}=A,n=e.join(":"),a=!0;if(a)return console.log(A);if(!n)return alert("アイテム名は空欄にできません");r.value=!0;const l=await fetch("/api/ir/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:n,desc:t})});if(200!=l.status)return alert("Communication failed."),!1;N(),await y()},$=(0,o.qj)({key:"",value:[],desc:""}),J=e=>{const{key:t,value:n,desc:a}=e;$.key=t,$.value=n,$.desc=a,p.value=!0},M=async()=>{const{key:e,desc:t}=$;if(!e)return alert("アイテム名は空欄にできません");r.value=!0;const n=await fetch(`/api/ir/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({desc:t})});if(200!=n.status)return alert("Communication failed."),!1;P(),await y()},R=(0,o.qj)({key:""}),Y=e=>{R.key=e.key,f.value=!0},F=async(e=null,t=!1)=>{r.value=!0;let{key:n}=R;e&&(n=e);const a=await fetch(`/api/ir/${n}`,{method:"DELETE"});if(200!=a.status)return alert("Communication failed."),!1;t||(W(),await y())},K=async()=>{confirm("本当に削除しますか？")&&(r.value=!0,await Promise.all(n.value.map((e=>F(e.key,!0)))),W(),await y())};return y(),(e,u)=>{const L=(0,l.up)("EasyDataTable");return(0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("button",{class:"btn btn-radius-solid",onClick:u[0]||(u[0]=e=>v.value=!0)},"新規登録"),w,(0,l._)("div",m,[(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=e=>d.value=e),placeholder:"SEARCH"},null,512),[[a.nr,d.value]])]),(0,l._)("a",{onClick:u[2]||(u[2]=e=>y())},"最新の情報に更新する"),(0,l.Wm)(L,{"show-index":"","items-selected":n.value,"onUpdate:itemsSelected":u[3]||(u[3]=e=>n.value=e),"buttons-pagination":"",headers:t,items:s.value,loading:r.value,"rows-per-page":10,"search-field":c.value,"search-value":d.value,alternating:""},{"item-key":(0,l.w5)((({key:e})=>[(0,l._)("a",{onClick:t=>Z(e)},(0,i.zw)(e),9,h)])),"item-operation":(0,l.w5)((e=>[(0,l._)("div",b,[(0,l._)("div",null,[(0,l._)("a",{onClick:t=>J(e)},"編集",8,g)]),(0,l._)("div",null,[(0,l._)("a",{onClick:t=>Y(e)},"削除",8,C)])])])),expand:(0,l.w5)((e=>[(0,l._)("div",j,[(0,l._)("div",null,[(0,l._)("span",O,"value ("+(0,i.zw)(e.value.length)+"): ",1),(0,l._)("div",U,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.value,((e,t)=>((0,l.wg)(),(0,l.iD)("span",{class:"signal_item",key:t},(0,i.zw)(e),1)))),128))])])])])),_:1},8,["items-selected","items","loading","search-field","search-value"]),n.value.length?((0,l.wg)(),(0,l.iD)("a",{key:0,onClick:u[4]||(u[4]=e=>K())},(0,i.zw)(n.value.length)+" 件のアイテムを削除",1)):(0,l.kq)("",!0),v.value?((0,l.wg)(),(0,l.iD)("div",x,[(0,l._)("h3",null,[(0,l.Uk)('Creating "'),(0,l._)("pre",D,(0,i.zw)(A.key),1),(0,l.Uk)('":')]),(0,l._)("div",null,[(0,l._)("div",null,[(0,l.Uk)("key :"),(0,l.Wm)((0,o.SU)(k.Z),{modelValue:A._key,"onUpdate:modelValue":u[5]||(u[5]=e=>A._key=e),options:V(A._key),mode:"tags"},null,8,["modelValue","options"])]),(0,l._)("div",null,[(0,l.Uk)("desc:"),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":u[6]||(u[6]=e=>A.desc=e)},null,512),[[a.nr,A.desc]])])]),(0,l._)("div",H,[(0,l._)("button",{onClick:u[7]||(u[7]=e=>I())},"Save"),(0,l._)("button",{onClick:u[8]||(u[8]=e=>N())},"Cancel")])])):(0,l.kq)("",!0),p.value?((0,l.wg)(),(0,l.iD)("div",T,[(0,l._)("h3",null,[(0,l.Uk)('Editing "'),(0,l._)("pre",S,(0,i.zw)($.key),1),(0,l.Uk)('":')]),(0,l._)("div",null,[(0,l._)("div",null,[(0,l.Uk)("desc:"),(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":u[9]||(u[9]=e=>$.desc=e)},null,512),[[a.nr,$.desc]])])]),(0,l._)("div",z,[(0,l._)("button",{onClick:u[10]||(u[10]=e=>M())},"Save"),(0,l._)("button",{onClick:u[11]||(u[11]=e=>P())},"Cancel")])])):(0,l.kq)("",!0),f.value?((0,l.wg)(),(0,l.iD)("div",E,[(0,l._)("h3",null,'Delete "'+(0,i.zw)(R.key)+'"?',1),(0,l._)("div",q,[(0,l._)("button",{onClick:u[12]||(u[12]=e=>F())},"Delete"),(0,l._)("button",{onClick:u[13]||(u[13]=e=>W())},"Cancel")])])):(0,l.kq)("",!0)])}}};const N=(0,v.Z)(V,[["__scopeId","data-v-7d705c9c"]]);var P=N;const W=(0,s.p7)({history:(0,s.r5)(),routes:[{path:"/irtable",name:"irtable",component:P}]});var Z=W,A=n(5893);const I=(0,a.ri)(f);I.component("EasyDataTable",A.Z),I.use(Z),I.mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,i){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],i=e[c][2];for(var s=!0,u=0;u<a.length;u++)(!1&i||o>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[u])}))?a.splice(u--,1):(s=!1,i<o&&(o=i));if(s){e.splice(c--,1);var r=l();void 0!==r&&(t=r)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,l,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,i,o=a[0],s=a[1],u=a[2],r=0;if(o.some((function(t){return 0!==e[t]}))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(u)var c=u(n)}for(t&&t(a);r<o.length;r++)i=o[r],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},a=self["webpackChunkclient"]=self["webpackChunkclient"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5090)}));a=n.O(a)})();
//# sourceMappingURL=app.88dbf50a.js.map